<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.gd.sakila.mapper.FilmMapper">
<select statementType="CALLABLE" 
			resultType="String" 
			parameterType="java.util.Map" 
			id="selectFilmInStock">
		<!--  Map : filmId, storeId, filmCount (mode=OUT) -->
		{
		call 
			film_in_stack 
			(
			#{FID}
			,#{storeId}
			,#{filmCount, mode=OUT, jdbcType=DECIMAL, javaType=Integer}
			)
		}
	</select>
	
	
	<select id="selectStaffListForCount"
			resultType="int" 
			parameterType="String">
		SELECT
			COUNT(*)
		FROM
			film_list
			
		<where>
			<if test="categoryName != null">
				AND category = #{categoryName}
			</if>
			
			<if test="price != null">
				AND price = #{price}
			</if>
			
			<if test="title != null">
				AND title LIKE CONCAT('%', #{title}, '%')
			</if>
		</where>
		
	</select>
	
	
	<select id="selectFilmList" 
			parameterType="java.util.Map"
			resultType="java.util.Map">
		SELECT 
			FID
			, title
			, category
			, price
			, rating
		FROM 
			film_list
		<where>
			<if test="categoryName != null">
				AND category = #{category}
			</if>
			
			<if test="price != null">
				AND price = #{price}
			</if>
			
			<if test="title != null">
				AND title LIKE CONCAT('%', #{title}, '%')
			</if>
		</where>
		Order BY
			FID ASC 		
	</select>

	
	
	<select id="selectFilmOne"
			parameterType="int"
			resultType="java.util.Map">
	
		SELECT
			FID 
			, title
			, description
			, category
			, price
			, rating
			, actors
		FROM
			film_list 
		WHERE
			FID = #{FID} 
	</select>
</mapper>